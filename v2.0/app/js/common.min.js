window.onload=function(){function e(){h.open("GET","./data/works.json",!0),h.setRequestHeader("Content-Type","application/json"),h.onreadystatechange=function(){if(4==h.readyState&&200==h.status){r(JSON.parse(h.response))}},h.send()}function t(){p.open("GET","./layout/filters-work.html",!0),p.setRequestHeader("Content-Type","application/html"),p.onreadystatechange=function(){if(4==p.readyState&&200==p.status){s(p.responseText)}},p.send()}function n(){v.open("GET","./layout/about.html",!0),v.setRequestHeader("Content-Type","application/html"),v.onreadystatechange=function(){if(4==v.readyState&&200==v.status){var e=v.responseText;if(L<1){document.getElementById("about").insertAdjacentHTML("afterBegin",e)}L++}},v.send()}function i(){w.open("GET","./layout/contact.html",!0),w.setRequestHeader("Content-Type","application/html"),w.onreadystatechange=function(){if(4==w.readyState&&200==w.status){var e=w.responseText;if(T<1){document.getElementById("contact").insertAdjacentHTML("afterBegin",e)}T++}},w.send()}function a(a){document.getElementById("loaders").classList.remove("hidden");for(var o=0;o<_.children.length;o++)_.children[o].classList.remove("active"),a.target.parentNode.getAttribute("data-link")==_.children[o].id&&(_.children[o].classList.add("active"),"about"==_.children[o].id?n():"works"==_.children[o].id?(E<1&&(t(),e()),E++):"contact"==_.children[o].id&&i(),"works"==_.children[o].id&&(H.querySelector(".work__item").style="display: flex;"));setTimeout(function(){document.getElementById("loaders").classList.add("hidden")},200)}function o(e,t,n){var i=n?e.target.parentNode:e.target;e.preventDefault();for(var a=0;a<t.length;a++)t[a].classList.remove("active");i.classList.add("active")}function s(e){document.getElementById("works").insertAdjacentHTML("afterBegin",e),l();var t=document.getElementById("work-filters"),n=t.getElementsByTagName("li"),i=document.getElementById("work-sort"),a=i.getElementsByTagName("li");t.addEventListener("click",function(){o(event,n)}),i.addEventListener("click",function(){o(event,a),"list"==document.querySelector("#work-sort .work__filter.active").dataset.sort?H.classList.add("list"):H.classList.remove("list")})}function r(e){var t="",n=e.length;j=n-R<3?n-R:3;for(var i=R;i<R+j;i++){var a=H.firstChild.nextSibling.cloneNode(!0);a.classList.add(e[i].type),a.querySelector(".work__img img").src=e[i].img,a.querySelector(".work__type").innerHTML=e[i].type,a.querySelector(".work__date").innerHTML=e[i].date,a.querySelector(".work__head").innerHTML=e[i].head,a.querySelector(".work__desc").innerHTML=e[i].desc;for(var o=0;o<e[i].tag.length;o++){var s=a.querySelector(".work__tags"),r=s.querySelector(".work__tag");r.innerHTML=e[i].tag[o],s.appendChild(r)}a.querySelector(".work__author-img img").src=e[i].authorImg,a.querySelector(".work__author-name").innerHTML=e[i].authorName;var l=document.createElement("div");l.appendChild(a),t+=l.innerHTML,i==n-1&&q.classList.add("disabled")}R+=3,H.insertAdjacentHTML("beforeend",t);var c=document.querySelector(".work__filter.active");if(c)for(var i=0;i<H.children.length;i++)H.children[i].style="display: none;",H.children[i].classList.contains(c.dataset.filter)&&(H.children[i].style="display: flex;")}function l(){var e=document.getElementById("work-filters");e.addEventListener("click",function(){var t=event.target;if(e!=t)for(var n=0;n<H.children.length;n++)H.children[n].style="display: none;",H.children[n].classList.contains(t.dataset.filter)&&(H.children[n].style="display: flex;")})}function c(){this.classList.toggle("active"),d()}function d(){S.classList.contains("mobile")?(N.style="min-width: 100%; left: -300px;",I.classList.contains("active")?(C.style="left: calc(50% - "+(C.offsetWidth/2+10)+"px);",k.cssText=k.cssText?"":"overflow: hidden; width: "+window.innerWidth+"px;height:"+window.innerHeight+"px;",b.style="opacity: 1; transform: scale(1);",N.style="left: 100%; display: none"):(k.cssText="overflow: auto; width: 100%; height: 100%;",C.style="left: -600px; transform: translateX(0);")):(b.style="opacity: 0; transform: scale(0);",I.classList.contains("active")?(C.style="left: 0px;",N.style="min-width: auto; left: 0;"):(C.style="left: -600px;",N.style="min-width: 100%; left: -300px;"))}function u(){document.body.clientWidth<=680?(S.classList.add("mobile"),I.classList.remove("active")):(S.classList.remove("mobile"),I.classList.add("active"))}function m(){S.classList.contains("mobile")&&(C.style="left: -600px;",I.classList.remove("active"),b.style="opacity: 0; transform: scale(0);",N.style="min-width: 100%; left: -300px;",k.cssText="overflow: auto; width: 100%; height: 100%;")}function f(e){var t=e.target?e.target.innerHTML:e.textContent;document.querySelector(".content-header__text span").innerHTML=" â€” "+t}function y(){window.innerHeight-20<C.offsetHeight?C.querySelector(".navigation").style="height: "+(window.innerHeight-40)+"px;":C.querySelector(".navigation").style="height: 400px;"}function g(){window.scrollBy(0,-60),window.pageYOffset>0&&requestAnimationFrame(g)}var h=new XMLHttpRequest,p=new XMLHttpRequest,v=new XMLHttpRequest,w=new XMLHttpRequest,L=0,E=0,T=0,k=document.documentElement.style,x=document.getElementById("menu"),B=x.getElementsByTagName("li"),_=document.getElementById("data-container"),H=document.getElementById("works-container"),q=document.getElementById("work-ajax"),I=document.getElementById("toggle-menu"),S=document.getElementById("home"),M=document.getElementById("btn-top"),b=document.getElementById("menu-close"),C=document.getElementById("aside"),N=document.getElementById("main"),R=0,j=0;u(),d(),function(){x.firstElementChild.classList.add("active"),document.getElementById("about").classList.add("active"),f(x.firstElementChild),setTimeout(function(){n(),document.getElementById("loaders").classList.add("hidden")},200)}(),y(),x.addEventListener("click",function(){o(event,B,!0),m(),a(event),f(event)}),I.addEventListener("click",c),b.addEventListener("click",function(){m()}),q.addEventListener("click",e),M.addEventListener("click",function(e){e.preventDefault(),g()},!1),window.onresize=function(){u(),d(),y()},window.onscroll=function(){!function(){window.pageYOffset>=600?M.style="bottom: -35px; right: -35px;":M.style="bottom: -100px; right: -100px;"}()}};