window.onload=function(){function e(){f.open("GET","./data/works.json",!0),f.setRequestHeader("Content-Type","application/json"),f.onreadystatechange=function(){if(4==f.readyState&&200==f.status){l(JSON.parse(f.response))}},f.send()}function t(){g.open("GET","./layout/filters-work.html",!0),g.setRequestHeader("Content-Type","application/html"),g.onreadystatechange=function(){if(4==g.readyState&&200==g.status){o(g.responseText)}},g.send()}function n(){p.open("GET","./layout/about.html",!0),p.setRequestHeader("Content-Type","application/html"),p.onreadystatechange=function(){if(4==p.readyState&&200==p.status){var e=p.responseText;if(h<1){document.getElementById("about").insertAdjacentHTML("afterBegin",e)}h++}},p.send()}function i(){v.open("GET","./layout/contact.html",!0),v.setRequestHeader("Content-Type","application/html"),v.onreadystatechange=function(){if(4==v.readyState&&200==v.status){var e=v.responseText;if(w<1){document.getElementById("contact").insertAdjacentHTML("afterBegin",e)}w++}},v.send()}function a(a){document.getElementById("loaders").classList.remove("hidden");for(var s=0;s<B.children.length;s++)B.children[s].classList.remove("active"),a.target.parentNode.getAttribute("data-link")==B.children[s].id&&(B.children[s].classList.add("active"),"about"==B.children[s].id?n():"works"==B.children[s].id?(L<1&&(t(),e()),L++):"contact"==B.children[s].id&&i(),"works"==B.children[s].id&&(T.querySelector(".work__item").style="display: flex;"));setTimeout(function(){document.getElementById("loaders").classList.add("hidden")},200)}function s(e,t,n){var i=n?e.target.parentNode:e.target;e.preventDefault();for(var a=0;a<t.length;a++)t[a].classList.remove("active");i.classList.add("active")}function o(e){document.getElementById("works").insertAdjacentHTML("afterBegin",e),r();var t=document.getElementById("work-filters"),n=t.getElementsByTagName("li"),i=document.getElementById("work-sort"),a=i.getElementsByTagName("li");t.addEventListener("click",function(){s(event,n)}),i.addEventListener("click",function(){s(event,a),"list"==document.querySelector("#work-sort .work__filter.active").dataset.sort?T.classList.add("list"):T.classList.remove("list")})}function l(e){var t="",n=e.length;C=n-M<3?n-M:3;for(var i=M;i<M+C;i++){var a=T.firstChild.nextSibling.cloneNode(!0);a.classList.add(e[i].type),a.querySelector(".work__img img").src=e[i].img,a.querySelector(".work__type").innerHTML=e[i].type,a.querySelector(".work__date").innerHTML=e[i].date,a.querySelector(".work__head").innerHTML=e[i].head,a.querySelector(".work__desc").innerHTML=e[i].desc;for(var s=0;s<e[i].tag.length;s++){var o=a.querySelector(".work__tags"),l=o.querySelector(".work__tag");l.innerHTML=e[i].tag[s],o.appendChild(l)}a.querySelector(".work__author-img img").src=e[i].authorImg,a.querySelector(".work__author-name").innerHTML=e[i].authorName;var r=document.createElement("div");r.appendChild(a),t+=r.innerHTML,i==n-1&&_.classList.add("disabled")}M+=3,T.insertAdjacentHTML("beforeend",t);var c=document.querySelector(".work__filter.active");if(c)for(var i=0;i<T.children.length;i++)T.children[i].style="display: none;",T.children[i].classList.contains(c.dataset.filter)&&(T.children[i].style="display: flex;")}function r(){var e=document.getElementById("work-filters");e.addEventListener("click",function(){var t=event.target;if(e!=t)for(var n=0;n<T.children.length;n++)T.children[n].style="display: none;",T.children[n].classList.contains(t.dataset.filter)&&(T.children[n].style="display: flex;")})}function c(){this.classList.toggle("active"),d()}function d(){I.classList.contains("mobile")?(b.style="min-width: 100%; left: -300px;",q.classList.contains("active")?(S.style="left: 50%; transform: translateX(-50%);",H.style="opacity: 1; transform: scale(1);",b.style="left: 100%;"):S.style="left: -600px; transform: translateX(0);"):(H.style="opacity: 0; transform: scale(0);",q.classList.contains("active")?(S.style="left: 0px;",b.style="min-width: auto; left: 0;"):(S.style="left: -600px;",b.style="min-width: 100%; left: -300px;"))}function u(){document.body.clientWidth<=680?(I.classList.add("mobile"),q.classList.remove("active")):(I.classList.remove("mobile"),q.classList.add("active"))}function m(){I.classList.contains("mobile")&&(S.style="left: -600px;",q.classList.remove("active"),H.style="opacity: 0; transform: scale(0);",b.style="min-width: 100%; left: -300px;")}function y(){window.scrollBy(0,-50),window.pageYOffset>0&&requestAnimationFrame(y)}var f=new XMLHttpRequest,g=new XMLHttpRequest,p=new XMLHttpRequest,v=new XMLHttpRequest,h=0,L=0,w=0,E=document.getElementById("menu"),k=E.getElementsByTagName("li"),B=document.getElementById("data-container"),T=document.getElementById("works-container"),_=document.getElementById("work-ajax"),q=document.getElementById("toggle-menu"),I=document.getElementById("home"),x=document.getElementById("btn-top"),H=document.getElementById("menu-close"),S=document.getElementById("aside"),b=document.getElementById("main"),M=0,C=0;u(),d(),function(){E.firstElementChild.classList.add("active"),document.getElementById("about").classList.add("active"),setTimeout(function(){n(),document.getElementById("loaders").classList.add("hidden")},200)}(),E.addEventListener("click",function(){s(event,k,!0),m(),a(event)}),q.addEventListener("click",c),H.addEventListener("click",function(){m()}),_.addEventListener("click",e),x.addEventListener("click",function(e){e.preventDefault(),y()},!1),window.onresize=function(){u(),d()},window.onscroll=function(){!function(){window.pageYOffset>=600?x.style="bottom: -35px; right: -35px;":x.style="bottom: -100px; right: -100px;"}()}};