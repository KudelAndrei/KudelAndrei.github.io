window.onload=function(){function e(){h.open("GET","./data/works.json",!0),h.setRequestHeader("Content-Type","application/json"),h.onreadystatechange=function(){if(4==h.readyState&&200==h.status){l(JSON.parse(h.response))}},h.send()}function t(){p.open("GET","./layout/filters-work.html",!0),p.setRequestHeader("Content-Type","application/html"),p.onreadystatechange=function(){if(4==p.readyState&&200==p.status){a(p.responseText)}},p.send()}function n(){v.open("GET","./layout/about.html",!0),v.setRequestHeader("Content-Type","application/html"),v.onreadystatechange=function(){if(4==v.readyState&&200==v.status){var e=v.responseText;if(L<1){document.getElementById("about").insertAdjacentHTML("afterBegin",e)}L++}},v.send()}function i(){w.open("GET","./layout/contact.html",!0),w.setRequestHeader("Content-Type","application/html"),w.onreadystatechange=function(){if(4==w.readyState&&200==w.status){var e=w.responseText;if(T<1){document.getElementById("contact").insertAdjacentHTML("afterBegin",e)}T++}},w.send()}function s(s){document.getElementById("loaders").classList.remove("hidden");for(var o=0;o<B.children.length;o++)B.children[o].classList.remove("active"),s.target.parentNode.getAttribute("data-link")==B.children[o].id&&(B.children[o].classList.add("active"),"about"==B.children[o].id?n():"works"==B.children[o].id?(E<1&&(t(),e()),E++):"contact"==B.children[o].id&&i(),"works"==B.children[o].id&&(H.querySelector(".work__item").style="display: flex;"));setTimeout(function(){document.getElementById("loaders").classList.add("hidden")},200)}function o(e,t,n){var i=n?e.target.parentNode:e.target;e.preventDefault();for(var s=0;s<t.length;s++)t[s].classList.remove("active");i.classList.add("active")}function a(e){var t=document.getElementById("works"),n=document.getElementById("work-filters");t.insertAdjacentHTML("afterBegin",e),r(n);var i=document.getElementById("work-sort"),s=i.getElementsByTagName("li");i.addEventListener("click",function(){o(event,s),"list"==document.querySelector("#work-sort .work__filter.active").dataset.sort?H.classList.add("list"):H.classList.remove("list")})}function l(e){var t="",n=e.length;A=n-j<3?n-j:3;for(var i=j;i<j+A;i++){var s=H.firstChild.nextSibling.cloneNode(!0);s.classList.add(e[i].type),s.querySelector(".work__img img").src=e[i].img,s.querySelector(".work__type").innerHTML=e[i].type,s.querySelector(".work__date").innerHTML=e[i].date,s.querySelector(".work__head").innerHTML=e[i].head,s.querySelector(".work__desc").innerHTML=e[i].desc;for(var o=0;o<e[i].tag.length;o++){var a=s.querySelector(".work__tags"),l=a.querySelector(".work__tag");l.innerHTML=e[i].tag[o],a.appendChild(l)}s.querySelector(".work__author-img img").src=e[i].authorImg,s.querySelector(".work__author-name").innerHTML=e[i].authorName;var r=document.createElement("div");r.appendChild(s),t+=r.innerHTML,i==n-1&&q.classList.add("disabled")}j+=3,H.insertAdjacentHTML("beforeend",t);var c=document.querySelector(".work__filter.active");if(c)for(var i=0;i<H.children.length;i++)H.children[i].style="display: none;",H.children[i].classList.contains(c.dataset.filter)&&(H.children[i].style="display: flex;")}function r(e){var t=e||document.getElementById("work-filters"),n=t.getElementsByTagName("li");t.addEventListener("click",function(){if(event.target.classList.contains("work__filter-first"))t.classList.toggle("open"),console.log(event.textContent);else{t.classList.remove("open"),o(event,n);var e=event.target;if(t!=e)for(var i=0;i<H.children.length;i++)H.children[i].style="display: none;",H.children[i].classList.contains(e.dataset.filter)&&(H.children[i].style="display: flex;")}})}function c(){this.classList.toggle("active"),d()}function d(){S.classList.contains("mobile")?(R.style="min-width: 100%; left: -300px;",I.classList.contains("active")?(C.style="left: calc(50% - "+(C.offsetWidth/2+10)+"px);",k.cssText=k.cssText?"":"overflow: hidden; width: "+window.innerWidth+"px;height:"+window.innerHeight+"px;",b.style="opacity: 1; transform: scale(1);",R.style="left: 100%; display: none"):(k.cssText="overflow: auto; width: 100%; height: 100%;",C.style="left: -600px; transform: translateX(0);")):(b.style="opacity: 0; transform: scale(0);",I.classList.contains("active")?(C.style="left: 0px;",R.style="min-width: auto; left: 0;"):(C.style="left: -600px;",R.style="min-width: 100%; left: -300px;"))}function u(){document.body.clientWidth<=680?(S.classList.add("mobile"),I.classList.remove("active")):(S.classList.remove("mobile"),I.classList.add("active"))}function m(){S.classList.contains("mobile")&&(C.style="left: -600px;",I.classList.remove("active"),b.style="opacity: 0; transform: scale(0);",R.style="min-width: 100%; left: -300px;",k.cssText="overflow: auto; width: 100%; height: 100%;")}function f(e){var t=e.target?e.target.innerHTML:e.textContent;document.querySelector(".content-header__text span").innerHTML=" â€” "+t}function y(){C.offsetHeight>400?N.style="height: 400px;":N.style="height: "+(window.innerHeight-40)+"px;"}function g(){window.scrollBy(0,-60),window.pageYOffset>0&&requestAnimationFrame(g)}var h=new XMLHttpRequest,p=new XMLHttpRequest,v=new XMLHttpRequest,w=new XMLHttpRequest,L=0,E=0,T=0,k=document.documentElement.style,x=document.getElementById("menu"),_=x.getElementsByTagName("li"),B=document.getElementById("data-container"),H=document.getElementById("works-container"),q=document.getElementById("work-ajax"),I=document.getElementById("toggle-menu"),S=document.getElementById("home"),M=document.getElementById("btn-top"),b=document.getElementById("menu-close"),C=document.getElementById("aside"),N=C.querySelector(".navigation"),R=document.getElementById("main"),j=0,A=0;u(),d(),function(){x.firstElementChild.classList.add("active"),document.getElementById("about").classList.add("active"),f(x.firstElementChild),setTimeout(function(){n(),document.getElementById("loaders").classList.add("hidden")},200)}(),y(),x.addEventListener("click",function(){o(event,_,!0),m(),s(event),f(event)}),I.addEventListener("click",c),b.addEventListener("click",function(){m()}),q.addEventListener("click",e),M.addEventListener("click",function(e){e.preventDefault(),g()},!1),window.onresize=function(){u(),d(),y()},window.onscroll=function(){!function(){window.pageYOffset>=600?M.style="bottom: -35px; right: -35px;":M.style="bottom: -100px; right: -100px;"}()}};