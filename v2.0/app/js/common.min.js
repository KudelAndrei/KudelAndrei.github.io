window.onload=function(){function e(){v.open("GET","./data/works.json",!0),v.setRequestHeader("Content-Type","application/json"),v.onreadystatechange=function(){if(4==v.readyState&&200==v.status){r(JSON.parse(v.response))}},v.send()}function t(){w.open("GET","./layout/filters-work.html",!0),w.setRequestHeader("Content-Type","application/html"),w.onreadystatechange=function(){if(4==w.readyState&&200==w.status){a(w.responseText)}},w.send()}function n(){L.open("GET","./layout/about.html",!0),L.setRequestHeader("Content-Type","application/html"),L.onreadystatechange=function(){if(4==L.readyState&&200==L.status){var e=L.responseText;if(k<1){document.getElementById("about").insertAdjacentHTML("afterBegin",e)}k++}},L.send()}function i(){E.open("GET","./layout/contact.html",!0),E.setRequestHeader("Content-Type","application/html"),E.onreadystatechange=function(){if(4==E.readyState&&200==E.status){var e=E.responseText;if(B<1){document.getElementById("contact").insertAdjacentHTML("afterBegin",e)}B++}},E.send()}function o(o){document.getElementById("loaders").classList.remove("hidden");for(var s=0;s<I.children.length;s++)I.children[s].classList.remove("active"),o.target.parentNode.getAttribute("data-link")==I.children[s].id&&(I.children[s].classList.add("active"),"about"==I.children[s].id?n():"works"==I.children[s].id?(T<1&&(t(),e()),T++):"contact"==I.children[s].id&&i(),"works"==I.children[s].id&&(H.querySelector(".work__item").style="display: flex;"));setTimeout(function(){document.getElementById("loaders").classList.add("hidden")},200)}function s(e,t,n){var i=n?e.target.parentNode:e.target;e.preventDefault();for(var o=0;o<t.length;o++)t[o].classList.remove("active");i.classList.add("active")}function a(e){var t=document.getElementById("works"),n=document.getElementById("work-filters");t.insertAdjacentHTML("afterBegin",e),l(n);var i=document.getElementById("work-sort"),o=i.getElementsByTagName("li");i.addEventListener("click",function(){s(event,o),"list"==document.querySelector("#work-sort .work__filter.active").dataset.sort?H.classList.add("list"):H.classList.remove("list")})}function r(e){var t="",n=e.length;A=n-W<3?n-W:3;for(var i=W;i<W+A;i++){var o=H.firstChild.nextSibling.cloneNode(!0);o.classList.add(e[i].type),o.querySelector(".work__img img").src=e[i].img,o.querySelector(".work__type").innerHTML=e[i].type,o.querySelector(".work__date").innerHTML=e[i].date,o.querySelector(".work__head").innerHTML=e[i].head,o.querySelector(".work__desc").innerHTML=e[i].desc;for(var s=0;s<e[i].tag.length;s++){var a=o.querySelector(".work__tags"),r=a.querySelector(".work__tag");r.innerHTML=e[i].tag[s],a.appendChild(r)}o.querySelector(".work__author-img img").src=e[i].authorImg,o.querySelector(".work__author-name").innerHTML=e[i].authorName;var l=document.createElement("div");l.appendChild(o),t+=l.innerHTML,i==n-1&&S.classList.add("disabled")}W+=3,H.insertAdjacentHTML("beforeend",t);var d=document.querySelector(".work__filter.active");if(d)for(var i=0;i<H.children.length;i++)H.children[i].style="display: none;",H.children[i].classList.contains(d.dataset.filter)&&(H.children[i].style="display: flex;")}function l(e){var t=e||document.getElementById("work-filters"),n=t.getElementsByTagName("li");t.addEventListener("click",function(){if(event.target.classList.contains("work__filter-first"))t.classList.toggle("open"),console.log(event.textContent);else{t.classList.remove("open"),s(event,n);var e=event.target;if(t!=e)for(var i=0;i<H.children.length;i++)H.children[i].style="display: none;",H.children[i].classList.contains(e.dataset.filter)&&(H.children[i].style="display: flex;")}})}function d(){this.classList.toggle("active"),c()}function c(){b.classList.contains("mobile")?(j.style="min-width: 100%; left: -300px;",M.classList.contains("active")?(R.style="left: calc(50% - "+(R.offsetWidth/2+10)+"px);",x.cssText=x.cssText?"":"overflow: hidden; width: "+window.innerWidth+"px;height:"+window.innerHeight+"px;",N.style="opacity: 1; transform: scale(1);",j.style="left: 100%; display: none"):(x.cssText="overflow: auto; width: 100%; height: 100%;",R.style="left: -600px; transform: translateX(0);")):(N.style="opacity: 0; transform: scale(0);",M.classList.contains("active")?(R.style="left: 0px;",j.style="min-width: auto; left: 0;"):(R.style="left: -600px;",j.style="min-width: 100%; left: -300px;"))}function u(){document.body.clientWidth<=680?(b.classList.add("mobile"),M.classList.remove("active")):(b.classList.remove("mobile"),M.classList.add("active"))}function m(){b.classList.contains("mobile")&&(R.style="left: -600px;",M.classList.remove("active"),N.style="opacity: 0; transform: scale(0);",j.style="min-width: 100%; left: -300px;",x.cssText="overflow: auto; width: 100%; height: 100%;")}function f(e){var t=e.target?e.target.innerHTML:e.textContent;document.querySelector(".content-header__text span").innerHTML=" â€” "+t}function y(){window.innerHeight-20<R.offsetHeight?R.querySelector(".navigation").style="height: "+(window.innerHeight-40)+"px;":R.querySelector(".navigation").style="height: 400px;"}function g(){var e=document.querySelector(".filters-wrap")?document.querySelector(".filters-wrap").offsetWidth:"undefined",t=(document.getElementById("work-filters").offsetWidth,document.getElementById("work-sort").offsetWidth);"undefined"!=e&&(console.log(h()),e-t>=h()+100?document.getElementById("work-filters").classList.remove("dropdown"):document.getElementById("work-filters").classList.add("dropdown"))}function h(){return document.getElementById("work-filters").offsetWidth}function p(){window.scrollBy(0,-60),window.pageYOffset>0&&requestAnimationFrame(p)}var v=new XMLHttpRequest,w=new XMLHttpRequest,L=new XMLHttpRequest,E=new XMLHttpRequest,k=0,T=0,B=0,x=document.documentElement.style,_=document.getElementById("menu"),q=_.getElementsByTagName("li"),I=document.getElementById("data-container"),H=document.getElementById("works-container"),S=document.getElementById("work-ajax"),M=document.getElementById("toggle-menu"),b=document.getElementById("home"),C=document.getElementById("btn-top"),N=document.getElementById("menu-close"),R=document.getElementById("aside"),j=document.getElementById("main"),W=0,A=0;u(),c(),function(){_.firstElementChild.classList.add("active"),document.getElementById("about").classList.add("active"),f(_.firstElementChild),setTimeout(function(){n(),document.getElementById("loaders").classList.add("hidden")},200)}(),y(),_.addEventListener("click",function(){s(event,q,!0),m(),o(event),f(event)}),M.addEventListener("click",d),N.addEventListener("click",function(){m()}),S.addEventListener("click",e),C.addEventListener("click",function(e){e.preventDefault(),p()},!1),window.onresize=function(){u(),c(),y(),g()},window.onscroll=function(){!function(){window.pageYOffset>=600?C.style="bottom: -35px; right: -35px;":C.style="bottom: -100px; right: -100px;"}()}};