window.onload=function(){function e(){y.open("GET","./data/works.json",!0),y.setRequestHeader("Content-Type","application/json"),y.onreadystatechange=function(){if(4==y.readyState&&200==y.status){l(JSON.parse(y.response))}},y.send()}function t(){g.open("GET","./layout/filters-work.html",!0),g.setRequestHeader("Content-Type","application/html"),g.onreadystatechange=function(){if(4==g.readyState&&200==g.status){o(g.responseText),B.classList.add("scale-out"),setTimeout(function(){B.style="display: none;"},200)}},g.send()}function n(){p.open("GET","./layout/about.html",!0),p.setRequestHeader("Content-Type","application/html"),p.onreadystatechange=function(){if(4==p.readyState&&200==p.status){var e=p.responseText;if(h<1){document.getElementById("about").insertAdjacentHTML("afterBegin",e)}h++}},p.send()}function i(){v.open("GET","./layout/contact.html",!0),v.setRequestHeader("Content-Type","application/html"),v.onreadystatechange=function(){if(4==v.readyState&&200==v.status){var e=v.responseText;if(w<1){document.getElementById("contact").insertAdjacentHTML("afterBegin",e)}w++}},v.send()}function a(t){document.getElementById("loaders").classList.remove("hidden");for(var a=0;a<T.children.length;a++)T.children[a].classList.remove("active"),t.target.parentNode.getAttribute("data-link")==T.children[a].id&&(T.children[a].classList.add("active"),"about"==T.children[a].id?n():"works"==T.children[a].id?(L<1&&e(),L++):"contact"==T.children[a].id&&i(),"works"==T.children[a].id&&(_.querySelector(".work__item").style="display: flex;"));setTimeout(function(){document.getElementById("loaders").classList.add("hidden")},200)}function s(e,t,n){var i=n?e.target.parentNode:e.target;e.preventDefault();for(var a=0;a<t.length;a++)t[a].classList.remove("active");i.classList.add("active")}function o(e){document.getElementById("works").insertAdjacentHTML("afterBegin",e),r();var t=document.getElementById("work-filters"),n=t.getElementsByTagName("li"),i=document.getElementById("work-sort"),a=i.getElementsByTagName("li");t.addEventListener("click",function(){s(event,n)}),i.addEventListener("click",function(){s(event,a),"list"==document.querySelector("#work-sort .work__filter.active").dataset.sort?_.classList.add("list"):_.classList.remove("list")})}function l(e){var t="",n=e.length;N=n-C<3?n-C:3;for(var i=C;i<C+N;i++){var a=_.firstChild.nextSibling.cloneNode(!0);a.classList.add(e[i].type),a.querySelector(".work__img img").src=e[i].img,a.querySelector(".work__type").innerHTML=e[i].type,a.querySelector(".work__date").innerHTML=e[i].date,a.querySelector(".work__head").innerHTML=e[i].head,a.querySelector(".work__desc").innerHTML=e[i].desc;for(var s=0;s<e[i].tag.length;s++){var o=a.querySelector(".work__tags"),l=o.querySelector(".work__tag");l.innerHTML=e[i].tag[s],o.appendChild(l)}a.querySelector(".work__author-img img").src=e[i].authorImg,a.querySelector(".work__author-name").innerHTML=e[i].authorName;var r=document.createElement("div");r.appendChild(a),t+=r.innerHTML,i==n-1&&I.classList.add("disabled")}C+=3,_.insertAdjacentHTML("beforeend",t);var d=document.querySelector(".work__filter.active");if(d)for(var i=0;i<_.children.length;i++)_.children[i].style="display: none;",_.children[i].classList.contains(d.dataset.filter)&&(_.children[i].style="display: flex;")}function r(){var e=document.getElementById("work-filters");e.addEventListener("click",function(){var t=event.target;if(e!=t)for(var n=0;n<_.children.length;n++)_.children[n].style="display: none;",_.children[n].classList.contains(t.dataset.filter)&&(_.children[n].style="display: flex;")})}function d(){this.classList.toggle("active"),c()}function c(){x.classList.contains("mobile")?(M.style="min-width: 100%; left: -300px;",q.classList.contains("active")?(S.style="left: 50%; transform: translateX(-50%);",b.style="left: 0; top: 0; border-radius: 0; opacity: .8; transform: scale(1);"):S.style="left: -600px; transform: translateX(0);"):(b.style="left: -100%;",q.classList.contains("active")?(S.style="left: 0px;",M.style="min-width: auto; left: 0;"):(S.style="left: -600px;",M.style="min-width: 100%; left: -300px;"))}function u(){window.innerWidth<680?(x.classList.add("mobile"),q.classList.remove("active")):(x.classList.remove("mobile"),q.classList.add("active"))}function m(){x.classList.contains("mobile")&&(S.style="left: -600px;",b.style="left: -100%;",q.classList.remove("active"),M.style="min-width: 100%; left: -300px;")}function f(){window.scrollBy(0,-50),window.pageYOffset>0&&requestAnimationFrame(f)}var y=new XMLHttpRequest,g=new XMLHttpRequest,p=new XMLHttpRequest,v=new XMLHttpRequest,h=0,L=0,w=0,E=document.getElementById("menu"),k=E.getElementsByTagName("li"),B=document.getElementById("btn-filters"),T=document.getElementById("data-container"),_=document.getElementById("works-container"),I=document.getElementById("work-ajax"),q=document.getElementById("toggle-menu"),x=document.getElementById("home"),H=document.getElementById("btn-top"),b=document.getElementById("home-before"),S=document.getElementById("aside"),M=document.getElementById("main"),C=0,N=0;u(),c(),function(){E.firstElementChild.classList.add("active"),document.getElementById("about").classList.add("active"),setTimeout(function(){n(),document.getElementById("loaders").classList.add("hidden")},200)}(),E.addEventListener("click",function(){s(event,k,!0),m(),a(event)}),B.addEventListener("click",t),q.addEventListener("click",d),b.addEventListener("click",function(){m()}),I.addEventListener("click",e),H.addEventListener("click",function(e){e.preventDefault(),f()},!1),window.onresize=function(){u(),c()},window.onscroll=function(){!function(){window.pageYOffset>=600?H.style="bottom: -35px; right: -35px;":H.style="bottom: -100px; right: -100px;"}()}};