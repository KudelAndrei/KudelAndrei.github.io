window.onload=function(){function e(e){document.getElementById("loaders").classList.remove("hidden");for(var t=0;t<h.children.length;t++)h.children[t].classList.remove("active"),e.target.parentNode.getAttribute("data-link")==h.children[t].id&&(h.children[t].classList.add("active"),"works"==h.children[t].id&&setTimeout(function(){v.querySelector(".work__item").style="visibility: visible; max-height: 100%;"},400));setTimeout(function(){document.getElementById("loaders").classList.add("hidden")},300)}function t(e,t,n){var i=n?e.target.parentNode:e.target;e.preventDefault();for(var s=0;s<t.length;s++)t[s].classList.remove("active");i.classList.add("active")}function n(){y.open("GET",_,!0),y.setRequestHeader("Content-Type","application/json"),y.onreadystatechange=function(){if(4==y.readyState&&200==y.status){o(JSON.parse(y.response))}},y.send()}function i(){this.classList.add("disabled"),f.open("GET","../layout/filters-work.html",!0),f.setRequestHeader("Content-Type","application/html"),f.onreadystatechange=function(){if(4==f.readyState&&200==f.status){s(f.responseText)}},f.send()}function s(e){document.getElementById("works").insertAdjacentHTML("afterBegin",e),a();var n=document.getElementById("work-filters"),i=n.getElementsByTagName("li"),s=document.getElementById("work-sort"),o=s.getElementsByTagName("li");n.addEventListener("click",function(){t(event,i)}),s.addEventListener("click",function(){t(event,o)})}function o(e){var t="",n=e.length;I=n-T<2?n-T:2;for(var i=T;i<T+I;i++){var s=v.firstChild.nextSibling.cloneNode(!0);s.classList.add(e[i].type),s.querySelector(".work__img img").src=e[i].img,s.querySelector(".work__type").innerHTML=e[i].type,s.querySelector(".work__date").innerHTML=e[i].date,s.querySelector(".work__head").innerHTML=e[i].head,s.querySelector(".work__desc").innerHTML=e[i].desc;for(var o=0;o<e[i].tag.length;o++){var a=s.querySelector(".work__tags"),l=a.querySelector(".work__tag");l.innerHTML=e[i].tag[o],a.appendChild(l)}s.querySelector(".work__author-img img").src=e[i].authorImg,s.querySelector(".work__author-name").innerHTML=e[i].authorName;var d=document.createElement("div");d.appendChild(s),t+=d.innerHTML,i==n-1&&L.classList.add("disabled")}T+=2,v.insertAdjacentHTML("beforeend",t)}function a(){var e=document.getElementById("work-filters");e.addEventListener("click",function(){var t=event.target;if(e!=t)for(var n=0;n<v.children.length;n++)v.children[n].style="visibility: hidden; max-height: 0;",setTimeout(v.children[n].style="display: none;",500),v.children[n].classList.contains(t.dataset.filter)&&(v.children[n].style="visibility: visible; max-height: 100%; display: block;")})}function l(){this.classList.toggle("active"),d()}function d(){w.classList.contains("mobile")?(b.style="min-width: 100%; left: -300px;",p.classList.contains("active")?(B.style="left: 50%; transform: translateX(-50%);",k.style="left: 0; top: 0; border-radius: 0; opacity: .8; transform: scale(1);"):B.style="left: -600px; transform: translateX(0);"):(k.style="left: -100%;",p.classList.contains("active")?(B.style="left: 0px;",b.style="min-width: auto; left: 0;"):(B.style="left: -600px;",b.style="min-width: 100%; left: -300px;"))}function r(){window.innerWidth<680?w.classList.add("mobile"):w.classList.remove("mobile")}function c(){w.classList.contains("mobile")&&(B.style="left: -600px;",k.style="left: -100%;",p.classList.remove("active"),b.style="min-width: 100%; left: -300px;")}var m=document.getElementById("menu"),u=m.getElementsByTagName("li"),y=new XMLHttpRequest,f=new XMLHttpRequest,g=document.getElementById("btn-filters"),h=document.getElementById("content-info"),v=document.getElementById("works-container"),L=document.getElementById("work-ajax"),p=document.getElementById("toggle-menu"),w=document.getElementById("home"),E=document.getElementById("btn-top"),k=document.getElementById("home-before"),B=document.getElementById("aside"),b=document.getElementById("main"),T=0,I=0,_="../data/works.json";r(),d(),function(){m.firstElementChild.classList.add("active"),document.getElementById("about").classList.add("active"),setTimeout(function(){document.getElementById("loaders").classList.add("hidden")},300)}(),m.addEventListener("click",function(){c(),t(event,u,!0),e(event)}),g.addEventListener("click",i),p.addEventListener("click",l),k.addEventListener("click",function(){c()}),L.addEventListener("click",n),window.onresize=function(){r(),d()},window.onscroll=function(){!function(){window.pageYOffset>=600?E.style="bottom: -35px; right: -35px;":E.style="bottom: 0; roght: 0;"}()}};