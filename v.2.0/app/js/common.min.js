window.onload=function(){function e(){d.open("GET",_,!0),d.setRequestHeader("Content-Type","application/json"),d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){i(JSON.parse(d.response))}},d.send()}function t(){this.classList.add("disabled"),u.open("GET","../layout/tabworks.html",!0),u.setRequestHeader("Content-Type","application/html"),u.onreadystatechange=function(){if(4==u.readyState&&200==u.status){n(u.responseText)}},u.send()}function n(e){y.insertAdjacentHTML("afterBegin",e),s()}function i(e){var t="",n=e.length;k=n-E<2?n-E:2;for(var i=E;i<E+k;i++){var s=f.firstChild.nextSibling.cloneNode(!0);s.classList.add(e[i].type),s.querySelector(".work__img").src=e[i].img,s.querySelector(".work__type").innerHTML=e[i].type,s.querySelector(".work__date").innerHTML=e[i].date,s.querySelector(".work__head").innerHTML=e[i].head,s.querySelector(".work__desc").innerHTML=e[i].desc;for(var o=0;o<e[i].tag.length;o++){var a=s.querySelector(".work__tags"),l=a.querySelector(".work__tag");l.innerHTML=e[i].tag[o],a.appendChild(l)}s.querySelector(".work__author-img").src=e[i].authorImg,s.querySelector(".work__author-name").innerHTML=e[i].authorName;var r=document.createElement("div");r.appendChild(s),t+=r.innerHTML,i==n-1&&g.classList.add("disabled")}E+=2,f.insertAdjacentHTML("beforeend",t)}function s(){document.getElementById("work-filters").addEventListener("click",function(){for(var e=event.target,t=0;t<f.children.length;t++)f.children[t].style="display: none",f.children[t].classList.contains(e.dataset.filter)&&(f.children[t].style="display: block")})}function o(){this.classList.toggle("active"),a()}function a(){L.classList.contains("mobile")?(w.style="min-width: 100%; left: -300px;",p.classList.contains("active")?(v.style="left: 0px;",h.style="left: 0;"):v.style="left: -600px;"):(h.style="left: -100%;",p.classList.contains("active")?(v.style="left: 0px;",w.style="min-width: auto; left: 0;"):(v.style="left: -600px;",w.style="min-width: 100%; left: -300px;"))}function l(){window.innerWidth<680?L.classList.add("mobile"):L.classList.remove("mobile")}function r(){L.classList.contains("mobile")&&(v.style="left: -600px;",h.style="left: -100%;",p.classList.remove("active"),w.style="min-width: 100%; left: -300px;")}var c=document.getElementById("menu"),d=new XMLHttpRequest,u=new XMLHttpRequest,m=document.getElementById("btn-filters"),y=document.getElementById("content-info"),f=document.getElementById("works"),g=document.getElementById("work-ajax"),p=document.getElementById("toggle-menu"),L=document.getElementById("home"),h=document.getElementById("home-before"),v=document.getElementById("aside"),w=document.getElementById("main"),E=0,k=0,_="../data/works.json";c.addEventListener("click",function(e){var t=document.getElementById("menu").getElementsByTagName("li"),n=e.target.parentNode;e.preventDefault(),r();for(var i=0;i<t.length;i++)t[i].classList.remove("active");n.classList.add("active")}),m.addEventListener("click",t),l(),p.addEventListener("click",o),h.addEventListener("click",function(){r()}),g.addEventListener("click",e),window.onresize=function(){l(),a()},window.onscroll=function(){}};