window.onload=function(){function e(e){document.getElementById("loaders").classList.remove("hidden");for(var t=0;t<v.children.length;t++)v.children[t].classList.remove("active"),e.target.parentNode.getAttribute("data-link")==v.children[t].id&&(v.children[t].classList.add("active"),"works"==v.children[t].id&&(h.querySelector(".work__item").style="display: flex;"));setTimeout(function(){document.getElementById("loaders").classList.add("hidden")},300)}function t(e,t,n){var i=n?e.target.parentNode:e.target;e.preventDefault();for(var s=0;s<t.length;s++)t[s].classList.remove("active");i.classList.add("active")}function n(){f.open("GET",b,!0),f.setRequestHeader("Content-Type","application/json"),f.onreadystatechange=function(){if(4==f.readyState&&200==f.status){l(JSON.parse(f.response))}},f.send()}function i(){this.classList.add("disabled"),y.open("GET","../layout/filters-work.html",!0),y.setRequestHeader("Content-Type","application/html"),y.onreadystatechange=function(){if(4==y.readyState&&200==y.status){s(y.responseText)}},y.send()}function s(e){document.getElementById("works").insertAdjacentHTML("afterBegin",e),a();var n=document.getElementById("work-filters"),i=n.getElementsByTagName("li"),s=document.getElementById("work-sort"),l=s.getElementsByTagName("li");n.addEventListener("click",function(){t(event,i)}),s.addEventListener("click",function(){t(event,l),"list"==document.querySelector("#work-sort .work__filter.active").dataset.sort?h.classList.add("list"):h.classList.remove("list")})}function l(e){var t="",n=e.length;T=n-I<2?n-I:2;for(var i=I;i<I+T;i++){var s=h.firstChild.nextSibling.cloneNode(!0);s.classList.add(e[i].type),s.querySelector(".work__img img").src=e[i].img,s.querySelector(".work__type").innerHTML=e[i].type,s.querySelector(".work__date").innerHTML=e[i].date,s.querySelector(".work__head").innerHTML=e[i].head,s.querySelector(".work__desc").innerHTML=e[i].desc;for(var l=0;l<e[i].tag.length;l++){var a=s.querySelector(".work__tags"),o=a.querySelector(".work__tag");o.innerHTML=e[i].tag[l],a.appendChild(o)}s.querySelector(".work__author-img img").src=e[i].authorImg,s.querySelector(".work__author-name").innerHTML=e[i].authorName;var r=document.createElement("div");r.appendChild(s),t+=r.innerHTML,i==n-1&&L.classList.add("disabled")}I+=2,h.insertAdjacentHTML("beforeend",t);var d=document.querySelector(".work__filter.active");if(d)for(var i=0;i<h.children.length;i++)h.children[i].style="display: none;",h.children[i].classList.contains(d.dataset.filter)&&(h.children[i].style="display: flex;")}function a(){var e=document.getElementById("work-filters");e.addEventListener("click",function(){var t=event.target;if(e!=t)for(var n=0;n<h.children.length;n++)h.children[n].style="display: none;",h.children[n].classList.contains(t.dataset.filter)&&(h.children[n].style="display: flex;")})}function o(){this.classList.toggle("active"),r()}function r(){w.classList.contains("mobile")?(B.style="min-width: 100%; left: -300px;",p.classList.contains("active")?(_.style="left: 50%; transform: translateX(-50%);",k.style="left: 0; top: 0; border-radius: 0; opacity: .8; transform: scale(1);"):_.style="left: -600px; transform: translateX(0);"):(k.style="left: -100%;",p.classList.contains("active")?(_.style="left: 0px;",B.style="min-width: auto; left: 0;"):(_.style="left: -600px;",B.style="min-width: 100%; left: -300px;"))}function d(){window.innerWidth<680?w.classList.add("mobile"):w.classList.remove("mobile")}function c(){w.classList.contains("mobile")&&(_.style="left: -600px;",k.style="left: -100%;",p.classList.remove("active"),B.style="min-width: 100%; left: -300px;")}var m=document.getElementById("menu"),u=m.getElementsByTagName("li"),f=new XMLHttpRequest,y=new XMLHttpRequest,g=document.getElementById("btn-filters"),v=document.getElementById("content-info"),h=document.getElementById("works-container"),L=document.getElementById("work-ajax"),p=document.getElementById("toggle-menu"),w=document.getElementById("home"),E=document.getElementById("btn-top"),k=document.getElementById("home-before"),_=document.getElementById("aside"),B=document.getElementById("main"),I=0,T=0,b="../data/works.json";d(),r(),function(){m.firstElementChild.classList.add("active"),document.getElementById("about").classList.add("active"),setTimeout(function(){document.getElementById("loaders").classList.add("hidden")},300)}(),m.addEventListener("click",function(){c(),t(event,u,!0),e(event)}),g.addEventListener("click",i),p.addEventListener("click",o),k.addEventListener("click",function(){c()}),L.addEventListener("click",n),window.onresize=function(){d(),r()},window.onscroll=function(){!function(){window.pageYOffset>=600?E.style="bottom: -35px; right: -35px;":E.style="bottom: 0; roght: 0;"}()}};