window.onload=function(){function e(e,t,n){var i=n?e.target.parentNode:e.target;e.preventDefault();for(var s=0;s<t.length;s++)t[s].classList.remove("active");i.classList.add("active"),console.log(i)}function t(){m.open("GET",B,!0),m.setRequestHeader("Content-Type","application/json"),m.onreadystatechange=function(){if(4==m.readyState&&200==m.status){s(JSON.parse(m.response))}},m.send()}function n(){this.classList.add("disabled"),y.open("GET","../layout/tabworks.html",!0),y.setRequestHeader("Content-Type","application/html"),y.onreadystatechange=function(){if(4==y.readyState&&200==y.status){i(y.responseText)}},y.send()}function i(t){g.insertAdjacentHTML("afterBegin",t),o();var n=document.getElementById("work-filters"),i=n.getElementsByTagName("li");n.addEventListener("click",function(){e(event,i)})}function s(e){var t="",n=e.length;T=n-_<2?n-_:2;for(var i=_;i<_+T;i++){var s=v.firstChild.nextSibling.cloneNode(!0);s.classList.add(e[i].type),s.querySelector(".work__img").src=e[i].img,s.querySelector(".work__type").innerHTML=e[i].type,s.querySelector(".work__date").innerHTML=e[i].date,s.querySelector(".work__head").innerHTML=e[i].head,s.querySelector(".work__desc").innerHTML=e[i].desc;for(var o=0;o<e[i].tag.length;o++){var a=s.querySelector(".work__tags"),l=a.querySelector(".work__tag");l.innerHTML=e[i].tag[o],a.appendChild(l)}s.querySelector(".work__author-img").src=e[i].authorImg,s.querySelector(".work__author-name").innerHTML=e[i].authorName;var r=document.createElement("div");r.appendChild(s),t+=r.innerHTML,i==n-1&&p.classList.add("disabled")}_+=2,v.insertAdjacentHTML("beforeend",t)}function o(){var e=document.getElementById("work-filters");e.addEventListener("click",function(){var t=event.target;if(e!=t)for(var n=0;n<v.children.length;n++)v.children[n].style="display: none",v.children[n].classList.contains(t.dataset.filter)&&(v.children[n].style="display: block")})}function a(){this.classList.toggle("active"),l()}function l(){h.classList.contains("mobile")?(k.style="min-width: 100%; left: -300px;",L.classList.contains("active")?(E.style="left: 0px;",w.style="left: 0;"):E.style="left: -600px;"):(w.style="left: -100%;",L.classList.contains("active")?(E.style="left: 0px;",k.style="min-width: auto; left: 0;"):(E.style="left: -600px;",k.style="min-width: 100%; left: -300px;"))}function r(){window.innerWidth<680?h.classList.add("mobile"):h.classList.remove("mobile")}function c(){h.classList.contains("mobile")&&(E.style="left: -600px;",w.style="left: -100%;",L.classList.remove("active"),k.style="min-width: 100%; left: -300px;")}var d=document.getElementById("menu"),u=d.getElementsByTagName("li"),m=new XMLHttpRequest,y=new XMLHttpRequest,f=document.getElementById("btn-filters"),g=document.getElementById("content-info"),v=document.getElementById("works"),p=document.getElementById("work-ajax"),L=document.getElementById("toggle-menu"),h=document.getElementById("home"),w=document.getElementById("home-before"),E=document.getElementById("aside"),k=document.getElementById("main"),_=0,T=0,B="../data/works.json";d.addEventListener("click",function(){c(),e(event,u,!0)}),f.addEventListener("click",n),r(),L.addEventListener("click",a),w.addEventListener("click",function(){c()}),p.addEventListener("click",t),window.onresize=function(){r(),l()},window.onscroll=function(){}};