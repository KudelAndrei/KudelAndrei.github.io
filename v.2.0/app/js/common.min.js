window.onload=function(){function e(e,t,n){var i=n?e.target.parentNode:e.target;e.preventDefault();for(var a=0;a<t.length;a++)t[a].classList.remove("active");i.classList.add("active"),console.log(i)}function t(){u.open("GET",B,!0),u.setRequestHeader("Content-Type","application/json"),u.onreadystatechange=function(){if(4==u.readyState&&200==u.status){a(JSON.parse(u.response))}},u.send()}function n(){this.classList.add("disabled"),f.open("GET","../layout/tabworks.html",!0),f.setRequestHeader("Content-Type","application/html"),f.onreadystatechange=function(){if(4==f.readyState&&200==f.status){i(f.responseText)}},f.send()}function i(t){g.insertAdjacentHTML("afterBegin",t),s();var n=document.getElementById("work-filters"),i=n.getElementsByTagName("li");n.addEventListener("click",function(){e(event,i)})}function a(e){var t="",n=e.length;T=n-_<2?n-_:2;for(var i=_;i<_+T;i++){var a=v.firstChild.nextSibling.cloneNode(!0);a.classList.add(e[i].type),a.querySelector(".work__img").src=e[i].img,a.querySelector(".work__type").innerHTML=e[i].type,a.querySelector(".work__date").innerHTML=e[i].date,a.querySelector(".work__head").innerHTML=e[i].head,a.querySelector(".work__desc").innerHTML=e[i].desc;for(var s=0;s<e[i].tag.length;s++){var o=a.querySelector(".work__tags"),r=o.querySelector(".work__tag");r.innerHTML=e[i].tag[s],o.appendChild(r)}a.querySelector(".work__author-img").src=e[i].authorImg,a.querySelector(".work__author-name").innerHTML=e[i].authorName;var l=document.createElement("div");l.appendChild(a),t+=l.innerHTML,i==n-1&&p.classList.add("disabled")}_+=2,v.insertAdjacentHTML("beforeend",t)}function s(){var e=document.getElementById("work-filters");e.addEventListener("click",function(){var t=event.target;if(e!=t)for(var n=0;n<v.children.length;n++)v.children[n].style="display: none",v.children[n].classList.contains(t.dataset.filter)&&(v.children[n].style="display: block")})}function o(){this.classList.toggle("active"),r()}function r(){h.classList.contains("mobile")?(k.style="min-width: 100%; left: -300px;",L.classList.contains("active")?(E.style="left: 50%; transform: translateX(-50%);",w.style="left: 0; top: 0; border-radius: 0; opacity: .8; transform: scale(1);"):E.style="left: -600px; transform: translateX(0);"):(w.style="left: -100%;",L.classList.contains("active")?(E.style="left: 0px;",k.style="min-width: auto; left: 0;"):(E.style="left: -600px;",k.style="min-width: 100%; left: -300px;"))}function l(){window.innerWidth<680?h.classList.add("mobile"):h.classList.remove("mobile")}function c(){h.classList.contains("mobile")&&(E.style="left: -600px;",w.style="left: -100%;",L.classList.remove("active"),k.style="min-width: 100%; left: -300px;")}var d=document.getElementById("menu"),m=d.getElementsByTagName("li"),u=new XMLHttpRequest,f=new XMLHttpRequest,y=document.getElementById("btn-filters"),g=document.getElementById("content-info"),v=document.getElementById("works"),p=document.getElementById("work-ajax"),L=document.getElementById("toggle-menu"),h=document.getElementById("home"),w=document.getElementById("home-before"),E=document.getElementById("aside"),k=document.getElementById("main"),_=0,T=0,B="../data/works.json";l(),r(),d.addEventListener("click",function(){c(),e(event,m,!0)}),y.addEventListener("click",n),L.addEventListener("click",o),w.addEventListener("click",function(){c()}),p.addEventListener("click",t),window.onresize=function(){l(),r()},window.onscroll=function(){}};