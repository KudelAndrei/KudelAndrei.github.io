window.onload=function(){function e(){window.scrollBy(0,-50),window.pageYOffset>0&&requestAnimationFrame(e)}function t(e){document.getElementById("loaders").classList.remove("hidden");for(var t=0;t<h.children.length;t++)h.children[t].classList.remove("active"),e.target.parentNode.getAttribute("data-link")==h.children[t].id&&(h.children[t].classList.add("active"),"works"==h.children[t].id&&(p.querySelector(".work__item").style="display: flex;"));setTimeout(function(){document.getElementById("loaders").classList.add("hidden")},300)}function n(e,t,n){var i=n?e.target.parentNode:e.target;e.preventDefault();for(var s=0;s<t.length;s++)t[s].classList.remove("active");i.classList.add("active")}function i(){y.open("GET",x,!0),y.setRequestHeader("Content-Type","application/json"),y.onreadystatechange=function(){if(4==y.readyState&&200==y.status){l(JSON.parse(y.response))}},y.send()}function s(){g.open("GET","../layout/filters-work.html",!0),g.setRequestHeader("Content-Type","application/html"),g.onreadystatechange=function(){if(4==g.readyState&&200==g.status){a(g.responseText),v.classList.add("scale-out"),setTimeout(function(){v.style="display: none;"},200)}},g.send()}function a(e){document.getElementById("works").insertAdjacentHTML("afterBegin",e),o();var t=document.getElementById("work-filters"),i=t.getElementsByTagName("li"),s=document.getElementById("work-sort"),a=s.getElementsByTagName("li");t.addEventListener("click",function(){n(event,i)}),s.addEventListener("click",function(){n(event,a),"list"==document.querySelector("#work-sort .work__filter.active").dataset.sort?p.classList.add("list"):p.classList.remove("list")})}function l(e){var t="",n=e.length;q=n-T<2?n-T:2;for(var i=T;i<T+q;i++){var s=p.firstChild.nextSibling.cloneNode(!0);s.classList.add(e[i].type),s.querySelector(".work__img img").src=e[i].img,s.querySelector(".work__type").innerHTML=e[i].type,s.querySelector(".work__date").innerHTML=e[i].date,s.querySelector(".work__head").innerHTML=e[i].head,s.querySelector(".work__desc").innerHTML=e[i].desc;for(var a=0;a<e[i].tag.length;a++){var l=s.querySelector(".work__tags"),o=l.querySelector(".work__tag");o.innerHTML=e[i].tag[a],l.appendChild(o)}s.querySelector(".work__author-img img").src=e[i].authorImg,s.querySelector(".work__author-name").innerHTML=e[i].authorName;var r=document.createElement("div");r.appendChild(s),t+=r.innerHTML,i==n-1&&L.classList.add("disabled")}T+=2,p.insertAdjacentHTML("beforeend",t);var d=document.querySelector(".work__filter.active");if(d)for(var i=0;i<p.children.length;i++)p.children[i].style="display: none;",p.children[i].classList.contains(d.dataset.filter)&&(p.children[i].style="display: flex;")}function o(){var e=document.getElementById("work-filters");e.addEventListener("click",function(){var t=event.target;if(e!=t)for(var n=0;n<p.children.length;n++)p.children[n].style="display: none;",p.children[n].classList.contains(t.dataset.filter)&&(p.children[n].style="display: flex;")})}function r(){this.classList.toggle("active"),d()}function d(){E.classList.contains("mobile")?(I.style="min-width: 100%; left: -300px;",w.classList.contains("active")?(_.style="left: 50%; transform: translateX(-50%);",B.style="left: 0; top: 0; border-radius: 0; opacity: .8; transform: scale(1);"):_.style="left: -600px; transform: translateX(0);"):(B.style="left: -100%;",w.classList.contains("active")?(_.style="left: 0px;",I.style="min-width: auto; left: 0;"):(_.style="left: -600px;",I.style="min-width: 100%; left: -300px;"))}function c(){window.innerWidth<680?(E.classList.add("mobile"),w.classList.remove("active")):(E.classList.remove("mobile"),w.classList.add("active"))}function m(){E.classList.contains("mobile")&&(_.style="left: -600px;",B.style="left: -100%;",w.classList.remove("active"),I.style="min-width: 100%; left: -300px;")}var u=document.getElementById("menu"),f=u.getElementsByTagName("li"),y=new XMLHttpRequest,g=new XMLHttpRequest,v=document.getElementById("btn-filters"),h=document.getElementById("content-info"),p=document.getElementById("works-container"),L=document.getElementById("work-ajax"),w=document.getElementById("toggle-menu"),E=document.getElementById("home"),k=document.getElementById("btn-top"),B=document.getElementById("home-before"),_=document.getElementById("aside"),I=document.getElementById("main"),T=0,q=0,x="../data/works.json";c(),d(),function(){u.firstElementChild.classList.add("active"),document.getElementById("about").classList.add("active"),setTimeout(function(){document.getElementById("loaders").classList.add("hidden")},300)}(),k.addEventListener("click",function(t){t.preventDefault(),e()},!1),u.addEventListener("click",function(){m(),n(event,f,!0),t(event)}),v.addEventListener("click",s),w.addEventListener("click",r),B.addEventListener("click",function(){m()}),L.addEventListener("click",i),window.onresize=function(){c(),d()},window.onscroll=function(){!function(){window.pageYOffset>=600?k.style="bottom: -35px; right: -35px;":k.style="bottom: -100px; right: -100px;"}()}};